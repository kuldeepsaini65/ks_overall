{% extends "dashboard.html" %}

{% block title %}
  {% if form.instance.pk %} Edit Expense {% else %} Add Expense {% endif %}
  | EverMix Tech
{% endblock title %}

{% block content %}
<main class="flex-fill p-3 p-md-4">

  <!-- Header -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-2">
    <h3 class="fw-bold mb-0">
      {% if form.instance.pk %}
        ✏️ Edit Expense
      {% else %}
        ➕ Add Expense
      {% endif %}
    </h3>

    <a href="{% url 'finance:exp_list' module=module %}"
       class="btn btn-outline-secondary rounded-pill px-4">
      Expense Transactions
    </a>
  </div>

  <!-- Form Wrapper -->
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10 col-xl-8">

      <div class="glass p-4 p-md-5">

        <form method="post" novalidate>
          {% csrf_token %}

          <!-- Row 1 -->
          <div class="row g-3">

            <div class="col-md-4">
              <label class="form-label fw-semibold">Category</label>
              {{ form.category }}
              {% if form.category.errors %}
                <div class="text-danger small">{{ form.category.errors }}</div>
              {% endif %}
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Debt</label>
              {{ form.debt }}
              {% if form.debt.errors %}
                <div class="text-danger small">{{ form.debt.errors }}</div>
              {% endif %}
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Amount</label>
              {{ form.amount }}
              {% if form.amount.errors %}
                <div class="text-danger small">{{ form.amount.errors }}</div>
              {% endif %}
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Payment Mode</label>
              {{ form.payment_mode }}
              {% if form.payment_mode.errors %}
                <div class="text-danger small">{{ form.payment_mode.errors }}</div>
              {% endif %}
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Expense Date</label>
              {{ form.expense_date }}
              {% if form.expense_date.errors %}
                <div class="text-danger small">{{ form.expense_date.errors }}</div>
              {% endif %}
            </div>

          </div> <!-- ✅ END row -->

          <!-- Note -->
          <div class="mt-3">
            <label class="form-label fw-semibold">Note</label>
            {{ form.note }}
            {% if form.note.errors %}
              <div class="text-danger small">{{ form.note.errors }}</div>
            {% endif %}
          </div>

          <!-- Actions -->
          <div class="d-flex flex-column flex-sm-row justify-content-end gap-2 mt-4">
            <a href="{% url 'finance:exp_list' module=module %}"
               class="btn btn-light px-4">
              Cancel
            </a>

            <button type="submit" class="btn btn-primary px-4">
              <i class="bi bi-check-circle me-1"></i>
              {% if form.instance.pk %} Update {% else %} Save Expense {% endif %}
            </button>
          </div>

        </form>

      </div>
    </div>
  </div>

</main>
{% endblock content %}
