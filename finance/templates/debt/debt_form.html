{% extends "dashboard.html" %}

{% block title %}
  {% if form.instance.pk %} Edit Debt {% else %} Add Debt {% endif %}
  | EverMix Tech
{% endblock title %}

{% block content %}
<main class="flex-fill p-3 p-md-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold mb-0">
      {% if form.instance.pk %}
        ✏️ Edit Debt
      {% else %}
        ➕ Add Debt
      {% endif %}
    </h3>

    <a href="{% url 'finance:debt_list' module=module %}"
       class="btn btn-outline-secondary rounded-pill px-4">
      Debt Records
    </a>
  </div>

  <!-- Content Width Wrapper -->
  <div style="max-width: 1100px;">

    <div class="glass p-4 p-md-5">

      <form method="post" novalidate>
        {% csrf_token %}

        <div class="row">

          <div class="col-md-4">
            <label class="form-label fw-semibold">Debt Name</label>
            {{ form.name }}
          </div>

          <div class="col-md-4">
            <label class="form-label fw-semibold">Debt Type</label>
            {{ form.debt_type }}
          </div>

          <div class="col-md-4">
            <label class="form-label fw-semibold">Lender</label>
            {{ form.lender }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">Principal Amount</label>
            {{ form.principal_amount }}
          </div>
          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">Interest Rate (per Annum)</label>
            {{ form.interest_rate }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">EMI Amount</label>
            {{ form.emi_amount }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">Tenure (Months)</label>
            {{ form.tenure_months }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">Start Date</label>
            {{ form.start_date }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">EMIs Already Paid</label>
            {{ form.emi_already_paid }}
          </div>

          <div class="col-md-4 mt-3">
            <label class="form-label fw-semibold">Amount Already Paid</label>
            {{ form.amount_already_paid }}
            <small class="text-muted d-block">Auto-calculated</small>
          </div>

        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
          <a href="{% url 'finance:debt_list' module=module %}" class="btn btn-light px-4">
            Cancel
          </a>
          <button type="submit" class="btn btn-primary px-4">
            {% if form.instance.pk %} Update {% else %} Save Debt {% endif %}
          </button>
        </div>

      </form>

    </div>
  </div>

</main>
{% endblock content %}
